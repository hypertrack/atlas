(this.webpackJsonpatlas2=this.webpackJsonpatlas2||[]).push([[0],{104:function(e,t,a){},105:function(e){e.exports=JSON.parse('{"trip_id":"93ac8a07-8be1-5af9-87f1-669bd9876abf","device_id":"389ZZZ9F-370F-4B6A-8AF2-355FAAA3ED41","started_at":"2019-12-03T02:57:58.817004Z","completed_at":"2019-12-03T03:30:31.895372Z","status":"completed","views":{"embed_url":"https://embed.hypertrack.com/trips/93ac8a07-8be1-5af9-87f1-669bd9876abf","share_url":"https://trck.at/neqtyx2"},"destination":{"geometry":{"type":"Point","coordinates":[-122.50349,37.761016]},"radius":30,"scheduled_at":"2019-12-03T03:02:46Z","arrived_at":"2019-12-03T03:56:09.345736Z"},"summary":{"locations":{"type":"LineString","coordinates":[[-122.40380523781268,37.78994365405238,13.060797691345215,"2019-12-03T02:57:59.917000Z"],[-122.4047061234553,37.78966776065564,14.036064147949219,"2019-12-03T02:58:22.851000Z"],[-122.40683440708955,37.78948397856211,17.977947235107422,"2019-12-03T02:58:44.785000Z"],[-122.4070552235184,37.78968532853664,27.189748764038086,"2019-12-03T02:59:11.577000Z"],[-122.40825885803274,37.789398415199415,32.42521586551325,"2019-12-03T02:59:41.537000Z"],[-122.40843059089696,37.7887746572914,22.74290281399059,"2019-12-03T03:00:09.512000Z"],[-122.40858312656457,37.789016305428824,39.45748091010166,"2019-12-03T03:00:35.431000Z"],[-122.41010679108805,37.78885939100578,37.85568871976695,"2019-12-03T03:01:40.537000Z"],[-122.42004972780202,37.787775493953525,45.732966795606345,"2019-12-03T03:03:26.536000Z"],[-122.42109472754251,37.78764361150457,52.30602386855734,"2019-12-03T03:03:37.536000Z"],[-122.42182231246127,37.787550522609365,56.04808384987481,"2019-12-03T03:03:50.536000Z"],[-122.42236095198665,37.78748243889746,59.06204495687806,"2019-12-03T03:04:37.536000Z"],[-122.42304823293608,37.78739532885071,60.27986736279662,"2019-12-03T03:04:47.536000Z"],[-122.42361381808774,37.787323519682346,60.99295299135015,"2019-12-03T03:05:10.536000Z"],[-122.42438855573654,37.78722398850542,60.696366235485456,"2019-12-03T03:05:20.536000Z"],[-122.42503891685419,37.787044573278145,72.74285816290359,"2019-12-03T03:05:35.536000Z"],[-122.42494413060359,37.78657402494255,67.8374285103313,"2019-12-03T03:05:46.536000Z"],[-122.42455995607365,37.786176832975286,67.40425109863281,"2019-12-03T03:05:59.213000Z"],[-122.42500180289409,37.78535417554728,62.915008544921875,"2019-12-03T03:06:14.875000Z"],[-122.42548494210382,37.78536210970118,65.35415844350499,"2019-12-03T03:06:28.001000Z"],[-122.42697434283141,37.785171265006376,62.44185734385869,"2019-12-03T03:06:40Z"],[-122.42759574947901,37.785092839148085,42.93339962063974,"2019-12-03T03:06:52Z"],[-122.42874876114492,37.78494610118471,50.541898488575775,"2019-12-03T03:07:04Z"],[-122.43026469441848,37.78478057260286,45.11359066007169,"2019-12-03T03:07:15Z"],[-122.43157544979404,37.78461830782285,42.7119233968643,"2019-12-03T03:07:26Z"],[-122.43301868613337,37.78439443545086,43.556112240212386,"2019-12-03T03:07:36Z"],[-122.43479001592132,37.78418442121112,51.78691675775509,"2019-12-03T03:07:47Z"],[-122.43629553692625,37.78399309331967,43.217086283580514,"2019-12-03T03:07:57Z"],[-122.43782070300489,37.7837997283837,44.49312687746679,"2019-12-03T03:08:07Z"],[-122.43914154929507,37.78342607925245,46.36627304022309,"2019-12-03T03:08:18Z"],[-122.43967031277124,37.783247337967744,46.817587567479634,"2019-12-03T03:09:19Z"],[-122.4413913337172,37.78313925175489,53.34834763347241,"2019-12-03T03:09:29Z"],[-122.4424841710465,37.78299990599217,59.69360531467893,"2019-12-03T03:09:40Z"],[-122.4436887039243,37.78283960389031,66.27437030339598,"2019-12-03T03:09:50Z"],[-122.44508143903802,37.78262353982407,75.50504309914496,"2019-12-03T03:10:00Z"],[-122.44678046028919,37.78242430041269,60.53683890665921,"2019-12-03T03:10:10Z"],[-122.44855565938198,37.782271219355074,59.17205334220168,"2019-12-03T03:10:20Z"],[-122.44956814752463,37.78224160996796,80.09442545505449,"2019-12-03T03:10:30Z"],[-122.45006157936818,37.782185546670725,77.96244484656202,"2019-12-03T03:11:09Z"],[-122.45100841063692,37.78206566392384,74.89064400782698,"2019-12-03T03:11:19Z"],[-122.45210196999045,37.781922565098526,71.61201347415417,"2019-12-03T03:11:30Z"],[-122.45279582891543,37.78183762972774,69.87818151425753,"2019-12-03T03:11:47Z"],[-122.4537153879902,37.781720206438855,68.26451742552388,"2019-12-03T03:11:58Z"],[-122.45508065055431,37.78154656775837,66.7461242442772,"2019-12-03T03:12:09Z"],[-122.45598759293269,37.78146644807713,66.55987640277024,"2019-12-03T03:12:20Z"],[-122.45657367092863,37.78143325108465,66.53485404968262,"2019-12-03T03:13:00Z"],[-122.4571328475854,37.781410747175165,67.28114950086194,"2019-12-03T03:13:10Z"],[-122.4574351438529,37.78139691020423,68.0542980151778,"2019-12-03T03:13:24Z"],[-122.45773744012041,37.78138307323329,67.86688663665288,"2019-12-03T03:13:42.001000Z"],[-122.45887800331101,37.78133017316303,65.6185662774257,"2019-12-03T03:13:53.001000Z"],[-122.46039259972596,37.78126180268372,60.806534424022615,"2019-12-03T03:14:04Z"],[-122.46187950519749,37.78119401506199,57.26055972273914,"2019-12-03T03:14:15Z"],[-122.46311593597864,37.781137567277376,54.53799755862883,"2019-12-03T03:14:26Z"],[-122.4635754956034,37.78111630018775,54.39053153991699,"2019-12-03T03:15:11Z"],[-122.46462487798897,37.78106923502092,54.39053153991699,"2019-12-03T03:15:22Z"],[-122.4658884380788,37.78101266699298,54.39053153991699,"2019-12-03T03:15:34Z"],[-122.46712961836437,37.78095433182897,54.39053153991699,"2019-12-03T03:15:45Z"],[-122.4682993224536,37.78090298876601,53.50108596949043,"2019-12-03T03:15:58Z"],[-122.46879697318913,37.780881491819756,53.28446216583466,"2019-12-03T03:16:33Z"],[-122.4699510961504,37.78083035144067,53.28679485321045,"2019-12-03T03:16:45Z"],[-122.47116786097915,37.780774187070136,53.28831057948777,"2019-12-03T03:16:56Z"],[-122.47200491906051,37.78073451580595,53.59499733031275,"2019-12-03T03:17:07Z"],[-122.4723785014674,37.78039049394216,54.33083950478182,"2019-12-03T03:18:12Z"],[-122.4722986815073,37.77934860507391,57.483920709312756,"2019-12-03T03:18:23Z"],[-122.47221259774888,37.77813739094023,61.85848676124736,"2019-12-03T03:18:34Z"],[-122.4721508168475,37.777306619844474,65.51911381823591,"2019-12-03T03:18:44.999000Z"],[-122.47212018221974,37.7768628806179,67.4549002455337,"2019-12-03T03:18:58.999000Z"],[-122.47203290947766,37.77571823145576,69.33406567060662,"2019-12-03T03:19:09.999000Z"],[-122.47194331207233,37.77445875615575,70.86535983020957,"2019-12-03T03:19:20.999000Z"],[-122.47186677708616,37.77341524632239,73.00831577497561,"2019-12-03T03:19:31.999000Z"],[-122.47183906698605,37.77303792935999,73.19370651245117,"2019-12-03T03:20:20.999000Z"],[-122.47227504477742,37.772460473587884,73.20101006968308,"2019-12-03T03:20:31.999000Z"],[-122.47353141127648,37.772487890198505,72.51433057790221,"2019-12-03T03:20:42Z"],[-122.47517709921712,37.77259553231059,79.94368986898219,"2019-12-03T03:20:53Z"],[-122.47676281036736,37.77244807319055,81.22650613501392,"2019-12-03T03:21:04Z"],[-122.47819718450114,37.77237916224345,85.98324529049953,"2019-12-03T03:21:14Z"],[-122.47924488578909,37.77206372896933,83.13049192660772,"2019-12-03T03:21:24Z"],[-122.47949415494541,37.77116797855233,79.49163309308766,"2019-12-03T03:21:35Z"],[-122.47897104295016,37.770179941805296,46.18467061742117,"2019-12-03T03:21:46Z"],[-122.47844254874923,37.76895393605531,74.86644775452004,"2019-12-03T03:21:57Z"],[-122.47826411208788,37.76770413570201,78.21989280025787,"2019-12-03T03:22:08Z"],[-122.4777531316674,37.76679617763052,77.97123115099203,"2019-12-03T03:22:19Z"],[-122.47743278316943,37.765743606776766,70.96320902330922,"2019-12-03T03:22:32Z"],[-122.4773290116765,37.76472970278552,69.18277540121241,"2019-12-03T03:22:43Z"],[-122.47726863193151,37.763900852791664,69.84688150443378,"2019-12-03T03:22:54Z"],[-122.47723578658503,37.76344522849423,69.32885453840164,"2019-12-03T03:23:37Z"],[-122.47717312364483,37.76253061147309,73.96703031420168,"2019-12-03T03:23:48Z"],[-122.47709897798636,37.761853843703705,79.54029753695501,"2019-12-03T03:24:10Z"],[-122.4775929688102,37.76167785464159,78.76119344881157,"2019-12-03T03:24:34Z"],[-122.47859535726286,37.76163433047982,77.2534118108176,"2019-12-03T03:24:46Z"],[-122.47965673346923,37.76158738754069,75.81199347747203,"2019-12-03T03:24:58Z"],[-122.48021373046794,37.76156259953119,74.18040555431182,"2019-12-03T03:25:11Z"],[-122.48111471688576,37.7615213052679,71.49601116888599,"2019-12-03T03:25:23Z"],[-122.48164209197603,37.76149881498399,70.33690769591456,"2019-12-03T03:25:51Z"],[-122.48270706290366,37.76145423300149,69.37941174057008,"2019-12-03T03:26:03Z"],[-122.4833401106305,37.761424192218534,69.70069782829736,"2019-12-03T03:26:22Z"],[-122.48390867545221,37.76140018494959,69.84763006937993,"2019-12-03T03:26:36Z"],[-122.48505930570688,37.761348706138214,71.01277462385951,"2019-12-03T03:26:47Z"],[-122.4859703112628,37.7613083023713,70.40279660947284,"2019-12-03T03:26:58Z"],[-122.48661836853447,37.761279632453764,69.24645767172328,"2019-12-03T03:27:09.999000Z"],[-122.48720238412372,37.761253630747994,68.02473646362733,"2019-12-03T03:27:33.999000Z"],[-122.4885750720123,37.7611924546166,66.39393693014316,"2019-12-03T03:27:46Z"],[-122.48919481328927,37.76116589747836,66.33680441673826,"2019-12-03T03:27:57Z"],[-122.48983882827936,37.761136800976594,67.62065100702826,"2019-12-03T03:28:18Z"],[-122.4903625229419,37.761113522520795,68.22646521118418,"2019-12-03T03:28:30Z"],[-122.49163445258677,37.76105765646019,68.77170545457255,"2019-12-03T03:28:41Z"],[-122.49277907947601,37.76100695014664,65.47289660589283,"2019-12-03T03:28:52Z"],[-122.49327174464806,37.76098601082183,62.170197405969404,"2019-12-03T03:29:13Z"],[-122.49453370698856,37.76092917586428,57.304304205768375,"2019-12-03T03:29:25Z"],[-122.49527420268056,37.760897058440904,53.670800268608005,"2019-12-03T03:29:37Z"],[-122.4957819357398,37.7608747007195,51.18312071290443,"2019-12-03T03:30:19Z"],[-122.49687711667076,37.760825143311266,46.899604232166794,"2019-12-03T03:30:31Z"]]},"distance":23994,"duration":3612,"started_at":"2019-12-03T02:57:58.817004Z","completed_at":"2019-12-03T03:58:10.895385Z","device_id":"389A4A9F-370F-4B6A-8AF2-355FCD43ED41","markers":[{"type":"device_status","data":{"value":"active","start":{"recorded_at":"2019-12-03T02:57:58.817004Z"},"end":{"recorded_at":"2019-12-03T02:57:59.917000Z","location":{"geometry":{"type":"Point","coordinates":[-122.40380523781268,37.78994365405238]},"recorded_at":"2019-12-03T02:57:59.917000Z"}},"activity":"walk","duration":1}},{"type":"device_status","data":{"value":"active","start":{"recorded_at":"2019-12-03T02:57:59.917000Z","location":{"geometry":{"type":"Point","coordinates":[-122.40380523781268,37.78994365405238]},"recorded_at":"2019-12-03T02:57:59.917000Z"}},"end":{"recorded_at":"2019-12-03T02:58:22.850000Z","location":{"geometry":{"type":"Point","coordinates":[-122.40380523781268,37.78994365405238]},"recorded_at":"2019-12-03T02:57:59.917000Z"}},"distance":11523,"duration":23}},{"type":"device_status","data":{"value":"active","start":{"recorded_at":"2019-12-03T02:58:22.850000Z","location":{"geometry":{"type":"Point","coordinates":[-122.40380523781268,37.78994365405238]},"recorded_at":"2019-12-03T02:57:59.917000Z"}},"end":{"recorded_at":"2019-12-03T03:01:20.124000Z","location":{"geometry":{"type":"Point","coordinates":[-122.40858312656457,37.789016305428824]},"recorded_at":"2019-12-03T03:00:35.431000Z"}},"activity":"drive","distance":558,"duration":177}},{"type":"device_status","data":{"value":"active","start":{"recorded_at":"2019-12-03T03:01:20.124000Z","location":{"geometry":{"type":"Point","coordinates":[-122.40858312656457,37.789016305428824]},"recorded_at":"2019-12-03T03:00:35.431000Z"}},"end":{"recorded_at":"2019-12-03T03:03:26.160000Z","location":{"geometry":{"type":"Point","coordinates":[-122.41010679108805,37.78885939100578]},"recorded_at":"2019-12-03T03:01:40.537000Z"}},"activity":"stop","distance":135,"duration":126}},{"type":"device_status","data":{"value":"active","start":{"recorded_at":"2019-12-03T03:03:26.160000Z","location":{"geometry":{"type":"Point","coordinates":[-122.41010679108805,37.78885939100578]},"recorded_at":"2019-12-03T03:01:40.537000Z"}},"end":{"recorded_at":"2019-12-03T03:22:20.388000Z","location":{"geometry":{"type":"Point","coordinates":[-122.4777531316674,37.76679617763052]},"recorded_at":"2019-12-03T03:22:19Z"}},"activity":"drive","distance":8799,"duration":1134}},{"type":"device_status","data":{"value":"active","start":{"recorded_at":"2019-12-03T03:22:20.388000Z","location":{"geometry":{"type":"Point","coordinates":[-122.4777531316674,37.76679617763052]},"recorded_at":"2019-12-03T03:22:19Z"}},"end":{"recorded_at":"2019-12-03T03:22:30.700000Z","location":{"geometry":{"type":"Point","coordinates":[-122.4777531316674,37.76679617763052]},"recorded_at":"2019-12-03T03:22:19Z"}},"activity":"walk","duration":10}},{"type":"device_status","data":{"value":"active","start":{"recorded_at":"2019-12-03T03:30:31.124000Z","location":{"geometry":{"type":"Point","coordinates":[-122.49687711667076,37.760825143311266]},"recorded_at":"2019-12-03T03:30:31.124000Z"}},"end":{"recorded_at":"2019-12-03T03:35:31Z"},"activity":"stop"}}],"start_address":"220 Kearny St, San Francisco, CA 94108, USA","end_address":"3202 Judah St, San Francisco, CA 94122"},"analytics":{"total_duration":23994,"active_count":9,"active_duration":3612,"walk_count":3,"walk_duration":174,"active_distance":23994,"drive_count":3,"drive_duration":1907,"drive_distance":12180,"stop_count":2,"stop_duration":1508,"walk_distance":87}}')},106:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(9),i=a.n(o),c=(a(55),a(8)),u=a(43),s=a(13),d=a(112),l=a(1),m=a(109),p=a(110),y=a(111),T=a(20),v=a(15),Z=a.n(v),f=a(21),g=a.n(f),_=function(e,t){var a=t;if(e.current.getLayer(t)||e.current.getLayer("".concat(t,"1"))){a=e.current.getLayer(t)?"".concat(t,"1"):t;var r=e.current.getLayer(t)?t:"".concat(t,"1");e.current.removeLayer(r),e.current.removeSource(r)}return a},b=function(e,t,a){t.current.getCanvas().style.cursor="pointer";for(var r=e.features[0].geometry.coordinates.slice(),n=e.features[0].properties.description;Math.abs(e.lngLat.lng-r[0])>180;)r[0]+=e.lngLat.lng>r[0]?360:-360;a.current.setLngLat(r).setHTML(n).addTo(t.current)},E=function(e,t){e.current.getCanvas().style.cursor="",t.current.remove()},O={plotLine:function(e,t,a,r){var n=_(e,"route");e.current.addLayer({id:n,type:"line",source:{type:"geojson",data:{type:"Feature",properties:{},geometry:a}},layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#6f4cff","line-width":8}}).fitBounds(function(e){var t=new Z.a.LngLat(e[0][0],e[0][1]),a=new Z.a.LngLatBounds(t,t);return e.reduce((function(e,t){var a=Object(c.a)(t,2),r=a[0],n=a[1];return e.extend(new Z.a.LngLat(r,n))}),a)}(a.coordinates),{padding:{top:40,bottom:40,left:20,right:20}}),n=_(e,"locationMarkers"),e.current.addLayer({id:n,type:"symbol",source:{type:"geojson",data:{type:"FeatureCollection",features:a.coordinates.map((function(e){var t=Object(c.a)(e,4),a=t[0],n=t[1],o=t[2],i=t[3];return{type:"Feature",properties:{description:g.a.renderToString(r({type:"locationMarker",coordinates:[n,a],alt:o,recorded_at:i})),icon:"marker"},geometry:new S.Point({type:"Point",coordinates:[a,n]})}}))}},layout:{"icon-image":"{icon}-15","icon-allow-overlap":!1}}),e.current.on("mouseenter",n,(function(a){return b(a,e,t)})),e.current.on("mouseleave",n,(function(){return E(e,t)}))},plotMarkers:function(e,t,a,r){var n=_(e,"deviceStatusMarkers");e.current.addLayer({id:n,type:"symbol",source:{type:"geojson",data:{type:"FeatureCollection",features:a.reduce((function(e,t){var a=t.start,n=t.end,o=t.deviceStatus,i=t.activity,c=t.duration;return a.location&&n.location?[].concat(Object(T.a)(e),[{type:"Feature",properties:{description:g.a.renderToString(r({type:"deviceStatusMarker",start:a,end:n,deviceStatus:o})),icon:x.getIcon(o,i,"circle-stroked")},geometry:a.location},{type:"Feature",properties:{description:g.a.renderToString(r({type:"deviceStatusMarker",start:a,end:n,deviceStatus:o,activity:i,duration:c})),icon:x.getIcon(o,i,"circle")},geometry:n.location}]):[].concat(Object(T.a)(e),[{type:"Feature",properties:{description:g.a.renderToString(r({type:"deviceStatusMarker",start:a,end:n,deviceStatus:o,activity:i,duration:c})),icon:x.getIcon(o,i)},geometry:n.location||a.location}])}),[])}},layout:{"icon-image":"{icon}-15","icon-allow-overlap":!0}}),e.current.on("mouseenter",n,(function(a){return b(a,e,t)})),e.current.on("mouseleave",n,(function(){return E(e,t)}))}},h=a(27),S={Line:function e(t){var a=t.type,r=t.coordinates;Object(h.a)(this,e),this.type=a,this.coordinates=r},Point:function e(t){var a=t.type,r=t.coordinates;Object(h.a)(this,e),this.type=a,this.coordinates=r}},w={useMap:function(e){var t=n.a.useRef();return n.a.useEffect((function(){t&&t.current||(t.current=new Z.a.Map({container:e,style:"mapbox://styles/mapbox/streets-v9",accessToken:"pk.eyJ1IjoiaHlwZXJ0cmFjay1kZXZvcHMiLCJhIjoiY2ptZzVndTduMWZ0YzNrbzFuNXR0cHUyOSJ9.Te8DokzaOXSVdh7ntUptyA",keyboard:!0,center:[0,0]}))}),[e]),t},usePopup:function(e,t){var a=n.a.useRef(new Z.a.Popup({closeButton:!1,closeOnClick:!1}));return n.a.useEffect((function(){e.current.on("load",(function(){a.current.addTo(e.current)}))}),[e,a]),a}},k=a(28);function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function j(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(Object(a),!0).forEach((function(t){Object(k.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var P=a(57),M=new(a(58))({allErrors:!0}).compile(P),L=function(e){var t=e.recorded_at,a=e.location,r={};return t&&(r.timestamp=t),a&&a.geometry&&(r.location=new S.Point(a.geometry)),r},J={geofence:function(e){var t=e.arrival,a=e.geofence,r=new S.Point(t.location.geometry),n=new S.Point(a.geometry);return{arrival:{arrivalPoint:r,arrivalTime:t.location.recorded_at},geofence:{geofencePoint:n,geofenceId:a.geofence_id,geofenceMetadata:JSON.stringify(a.metadata,null,2),radius:Number(a.radius)}}},device_status:function(e){var t=e.activity,a=e.duration,r=e.value,n=L(e.end),o=L(e.start),i={};return t&&(i.activity=t),a&&(i.duration=a),j({start:o,end:n,deviceStatus:r},i)}},F=function(e){var t=e.type,a=e.data;return J[t](a)},I={stop:"cafe",walk:"pitch",run:"skiing",drive:"car",cycle:"bicycle",disconnected:"cross",inactive:"roadblock",active:"rocket"},x={parseMarker:F,getIcon:function(e,t,a){return I[t]||a||I[e]},secondsToHms:function(e){e=Number(e);var t=Math.floor(e/3600),a=Math.floor(e%3600/60),r=Math.floor(e%3600%60);return(t>0?t+" h ":"")+(a>0?a+" m ":"")+(r>0?r+" s":"")},markersByType:function(e){return function(t){var a=e.reduce((function(e,t){return j({},e,Object(k.a)({},t.type,e[t.type]?[F(t)].concat(Object(T.a)(e[t.type])):[F(t)]))}),{});return t&&a[t]?a[t]:a}},validateTripJSON:function(e){return!M(e)&&M.errors}},A=(a(37),function(e){var t=e.trip,a=e.showTripModal,r=e.updateJson,o=e.hideModal,i=e.showModal,T=n.a.useState(JSON.stringify(t,null,"\t")),v=Object(c.a)(T,2),Z=v[0],f=v[1],g=n.a.useState(void 0),_=Object(c.a)(g,2),b=_[0],E=_[1],O=n.a.useState(""),h=Object(c.a)(O,2),S=h[0],w=h[1];n.a.useEffect((function(){JSON.stringify(t)!==JSON.stringify(Z)&&f(JSON.stringify(t,null,"\t"))}),[t]);var k=function(e){var t=x.validateTripJSON(e);return t&&t.length?w(t):w(null),Boolean(t)};return n.a.createElement(n.a.Fragment,null,n.a.createElement(u.a,{intent:s.a.SUCCESS,className:"show-trip-button",onClick:function(){return a?o():i()}},"Update JSON"),n.a.createElement(d.a,{isOpen:S||a,title:"Add your own JSON",onClose:o,className:"dialog"},n.a.createElement("div",{className:l.a.DIALOG_BODY},n.a.createElement("div",{className:"dialog-container"},n.a.createElement(m.a,{value:Z,disabled:!1,onChange:function(e){return f(e.target.value)},className:"user-summary-input",placeholder:"Paste trip_summary here",onBlur:function(e){e&&e.preventDefault();var t=e.target.value;if(t)try{var a=JSON.parse(t);k(a)}catch(r){console.error(r),w([r])}}}),S&&S.length?n.a.createElement("div",{className:"error-table-container"},n.a.createElement(p.a,{className:"error-table",bordered:!0},n.a.createElement("caption",null,"There ",S.length>1?"are":"is an"," ",S.length>1?S.length:""," issue",S.length>1?"s":""),n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"Location"),n.a.createElement("th",null,"Issue"))),n.a.createElement("tbody",null,S.map((function(e){return n.a.createElement("tr",{key:e.dataPath},n.a.createElement("td",null,n.a.createElement("div",{className:"table-content"},e.dataPath)),n.a.createElement("td",null,n.a.createElement("div",{className:"table-content"},e.message)))}))))):null)),n.a.createElement("div",{className:l.a.DIALOG_FOOTER},n.a.createElement("div",{className:l.a.DIALOG_FOOTER_ACTIONS},n.a.createElement(y.a,{text:b,buttonText:"Browse",className:"file-input",onInputChange:function(e){e&&e.preventDefault();var t=new FileReader,a=e.target.files[0];E(a&&a.name?a.name:void 0),t.readAsText(a,"UTF-8"),t.onload=function(e){var t=e.target.result,a=JSON.parse(t);f(t),k(a)||(r(a),o())}},inputProps:{accept:".json"}}),n.a.createElement(u.a,{disabled:S&&S.length||!Z,onClick:function(e){f(JSON.stringify(t,null,"\t")),o()}},"Close"),n.a.createElement(u.a,{intent:s.a.PRIMARY,disabled:S&&S.length||!Z,onClick:function(e){try{var t=JSON.parse(Z);r(t),o()}catch(a){console.error(a),w([a])}}},"Update")))))}),D=a(44),C=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],B=function(e){return C[e.getMonth()]+" "+e.getDate()+", "+e.getFullYear()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()},z={deviceStatusMarker:function(e){var t=e.start,a=e.end,r=(e.deviceStatus,e.activity),o=e.duration;return n.a.createElement("tbody",null,t?n.a.createElement("tr",{className:"capitalize"},n.a.createElement("td",null,"Start Time"),n.a.createElement("td",null,B(new Date(t.timestamp)))):null,a?n.a.createElement("tr",{className:"capitalize"},n.a.createElement("td",null,"End Time"),n.a.createElement("td",null,B(new Date(a.timestamp)))):null,o?n.a.createElement("tr",null,n.a.createElement("td",null,"Duration"),n.a.createElement("td",null,x.secondsToHms(o))):null,r?n.a.createElement("tr",null,n.a.createElement("td",null,"Activity"),n.a.createElement("td",{className:"capitalize"},r)):null)},locationMarker:function(e){var t=Object(c.a)(e.coordinates,2),a=t[0],r=t[1],o=e.alt,i=e.recorded_at;return n.a.createElement("tbody",null,n.a.createElement("tr",null,n.a.createElement("td",null,"Coordinates"),n.a.createElement("td",{className:"capitalize"},a," ",r)),n.a.createElement("tr",null,n.a.createElement("td",null,"Altitude"),n.a.createElement("td",{className:"capitalize"},o)),n.a.createElement("tr",null,n.a.createElement("td",null,"Recorded at"),n.a.createElement("td",{className:"capitalize"},B(new Date(i)))))}},R={locationMarker:function(){return"location"},deviceStatusMarker:function(e){return e.deviceStatus}},U=function(e){var t=e.type,a=Object(D.a)(e,["type"]);return n.a.createElement("table",{className:"device-status-table"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",{colSpan:2,className:"capitalize"},R[t](a)))),z[t](a))},H=(a(102),a(103),a(104),a(105)),Y="map-container",X=function(e){return n.a.createElement(U,e)},G="true"===new URLSearchParams(window.location.search).get("loadDefault");var V=function(){var e=n.a.useState(!0),t=Object(c.a)(e,2),a=t[0],r=t[1],o=n.a.useState(G?H:void 0),i=Object(c.a)(o,2),u=i[0],s=i[1],d=w.useMap(Y),l=w.usePopup(d),m=function(e,t){s(e),t||localStorage.setItem("previousJSON",JSON.stringify(e,null,"\t"));var a=e.summary,r=a.locations,n=a.markers,o=new S.Line(r),i=x.markersByType(n)("device_status");O.plotLine(d,l,o,X),O.plotMarkers(d,l,i,X)};return n.a.useEffect((function(){if(G)window.history.replaceState({},"","?loadDefault=false");else{var e=localStorage.getItem("previousJSON"),t=JSON.parse(e);t&&d.current.on("load",(function(){m(t,!0)}))}}),[]),n.a.createElement("div",{className:"app-container"},n.a.createElement("div",{id:Y}),n.a.createElement(A,{trip:u,showTripModal:a,showModal:function(){return r(!0)},hideModal:function(){return r(!1)},updateJson:m}))};i.a.render(n.a.createElement(V,null),document.getElementById("root"))},37:function(e,t,a){},50:function(e,t,a){e.exports=a(106)},55:function(e,t,a){},57:function(e){e.exports=JSON.parse('{"properties":{"trip_id":{"type":"string","format":"uuid"},"device_id":{"type":"string","format":"uuid"},"started_at":{"type":"string","format":"date-time"},"completed_at":{"type":"string","format":"date-time"},"status":{"type":"string"},"views":{"properties":{"embed_url":{"type":"string","format":"uri"},"share_url":{"type":"string","format":"uri"}}},"analytics":{"properties":{"total_duration":{"type":"number"},"active_count":{"type":"number"},"active_duration":{"type":"number"},"stop_count":{"type":"number"},"stop_duration":{"type":"number"},"active_distance":{"type":"number"},"walk_count":{"type":"number"},"walk_duration":{"type":"number"},"walk_distance":{"type":"number"},"drive_count":{"type":"number"},"drive_duration":{"type":"number"},"drive_distance":{"type":"number"},"inactive_count":{"type":"number"},"inactive_duration":{"type":"number"}}},"summary":{"properties":{"distance":{"type":"number"},"duration":{"type":"number"},"started_at":{"type":"string","format":"date-time"},"completed_at":{"type":"string","format":"date-time"},"device_id":{"type":"string","format":"uuid"},"locations":{"properties":{"type":{"type":"string"},"coordinates":{"type":"array","items":{"type":"array","maxItems":4,"minItems":2,"items":[{"type":"number","minimum":-179.999999,"maximum":179.999999},{"type":"number","minimum":-89.999999,"maximum":89.999999},{"type":["number","null"],"minimum":-12262,"maximum":11000},{"type":"string","format":"date-time"}]}}}},"markers":{"type":"array","items":[{"properties":{"type":{"type":"string"},"data":{"properties":{"activity":{"type":"string"},"duration":{"type":"number"},"value":{"type":"string"},"start":{"properties":{"recorded_at":{"type":"string","format":"date-time"},"location":{"properties":{"recorded_at":{"type":"string","format":"date-time"},"geometry":{"properties":{"type":{"type":"string"},"coordinates":{"type":"array","maxItems":4,"minItems":2,"items":[{"type":"number","minimum":-179.999999,"maximum":179.999999},{"type":"number","minimum":-89.999999,"maximum":89.999999},{"type":["number","null"],"minimum":-12262,"maximum":11000},{"type":"string","format":"date-time"}]}}}}}}},"end":{"properties":{"recorded_at":{"type":"string","format":"date-time"},"location":{"properties":{"recorded_at":{"type":"string","format":"date-time"},"geometry":{"properties":{"type":{"type":"string"},"coordinates":{"type":"array","maxItems":4,"minItems":2,"items":[{"type":"number","minimum":-179.999999,"maximum":179.999999},{"type":"number","minimum":-89.999999,"maximum":89.999999},{"type":["number","null"],"minimum":-12262,"maximum":11000},{"type":"string","format":"date-time"}]}}}}}}}}}}}]}}}}}')}},[[50,1,2]]]);
//# sourceMappingURL=main.137c0a3d.chunk.js.map